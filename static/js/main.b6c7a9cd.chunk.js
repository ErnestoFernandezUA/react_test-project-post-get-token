(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{86:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var a=n(26),r=n(53),s=n.n(r),o=n(54),i=n(3),c=n(13),u=n(14),l=n(17),d=n(55),p=n.n(d),f=n(11),g=n(4),j=n.n(g),b=n(8),h=n(93),v="https://frontend-test-assignment-api.abz.agency/api/v1",m=h.a.create({baseURL:v}),x=function(e){return Object(b.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("get",v+e),t.next=3,m.get(e);case 3:return n=t.sent,t.abrupt("return",n.data);case 5:case"end":return t.stop()}}),t)})))()},O=function(e,t,n){return Object(b.a)(j.a.mark((function a(){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("post",v+e,t),a.next=3,m.post(e,t,n);case 3:return r=a.sent,a.abrupt("return",r.data);case 5:case"end":return a.stop()}}),a)})))()},y={storage:[],statusLoading:"idle",error:null},k=Object(u.b)("users/getPositions",function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,x("/positions");case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a(e.t0);case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),w=Object(u.c)({name:"positions",initialState:y,reducers:{addPositions:function(e,t){var n;(n=e.storage).push.apply(n,Object(f.a)(t.payload))},setPositionsStatus:function(e,t){e.statusLoading=t.payload},setPositionsError:function(e,t){e.error=t.payload,e.statusLoading="failed"},resetPositionsState:function(){return y}},extraReducers:function(e){e.addCase(k.pending,(function(e){e.statusLoading="loading"})).addCase(k.fulfilled,(function(e,t){e.statusLoading="idle",t.payload&&t.payload.success&&(e.storage=t.payload.positions)})).addCase(k.rejected,(function(e){e.statusLoading="failed"}))}}),_=w.reducer,S=w.actions,L=(S.setPositionsStatus,S.setPositionsError,S.resetPositionsState,function(e,t){var n=Date.now();if(e){var a=n-e<60*t*1e3;return console.log("selectTokenIsExpired/ time from last:",Math.floor((n-e)/1e3/60),"min,","is token active? ",a),a}return!1}),C={storage:null,currentRequestId:null,timeOfLastSet:null,statusLoading:"idle",error:null},P=Object(u.b)("token/fetchToken",function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a,r,s,o,i,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.rejectWithValue,r=n.getState,s=n.requestId,e.prev=1,o=r(),i=L(o.token.timeOfLastSet,40),s!==o.token.currentRequestId||i){e.next=9;break}return e.next=7,x("/token");case 7:return c=e.sent,e.abrupt("return",c);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),a(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()),T=Object(u.c)({name:"token",initialState:C,reducers:{setToken:function(e,t){e.storage=t.payload.token},setStatus:function(e,t){e.statusLoading=t.payload},setError:function(e,t){e.error=t.payload,e.statusLoading="failed"},resetToken:function(){return C}},extraReducers:function(e){e.addCase(P.pending,(function(e,t){var n=t.meta.requestId;e.statusLoading="loading",e.error=null,e.currentRequestId||(e.currentRequestId=n)})).addCase(P.fulfilled,(function(e,t){t.payload&&(e.storage=t.payload.token,e.timeOfLastSet=Date.now()),e.statusLoading="idle",e.currentRequestId=null})).addCase(P.rejected,(function(e,t){e.statusLoading="failed",e.error=t.payload}))}}),E=T.reducer,I=T.actions,N=(I.setToken,I.setStatus,I.setError,I.resetToken,function(e,t,n){return x(e||"/users?page=".concat(t,"&count=").concat(n))}),R={storage:[],payload:[],statusLoading:"idle",error:null,link_to_next_page:null,current_page:null,total_pages:null,positions:[],fails:{name:null,email:null,phone:null,images:null,position_id:null}},U=Object(u.b)("users/fetchUsers",function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a,r,s,o,i,c,u,l,d,p;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.link_to_next_page,r=void 0===a?null:a,s=t.page,o=void 0===s?1:s,i=t.count,c=void 0===i?6:i,u=t.delay,l=void 0===u?5e3:u,d=n.rejectWithValue,e.prev=2,e.next=5,new Promise((function(e){return setTimeout(e,l)}));case 5:return e.next=7,N(r,o,c);case 7:return p=e.sent,e.abrupt("return",p);case 11:e.prev=11,e.t0=e.catch(2),d(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}()),H=Object(u.b)("users/postUser",function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a,r,s,o,i,c,u,l,d,p,f,g,b;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.user,r=a.name,s=a.email,o=a.phone,i=a.images,c=a.position_id,u=t.delay,l=void 0===u?1e3:u,d=n.getState,p=n.rejectWithValue,console.log("postUserAsync",c),e.prev=3,f=d(),console.log("state.token.storage",f.token.storage),e.next=8,new Promise((function(e){return setTimeout(e,l)}));case 8:return(g=new FormData).append("position_id",c),g.append("name",r),g.append("email",s),g.append("phone",o),g.append("photo",i[0]),console.log(g),e.next=17,j={body:g,headers:{Token:String(f.token.storage)}},O("/users",j,void 0);case 17:return b=e.sent,console.log("postUserAsync/ response",b),e.abrupt("return",b);case 22:e.prev=22,e.t0=e.catch(3),p(e.t0);case 25:case"end":return e.stop()}var j}),e,null,[[3,22]])})));return function(t,n){return e.apply(this,arguments)}}()),q=Object(u.c)({name:"user",initialState:R,reducers:{addUsers:function(e,t){var n;(n=e.storage).push.apply(n,Object(f.a)(t.payload))},addPayload:function(e){var t;(t=e.storage).push.apply(t,Object(f.a)(e.payload)),e.payload.length=0},setStatus:function(e,t){e.statusLoading=t.payload},resetState:function(){return R}},extraReducers:function(e){e.addCase(U.pending,(function(e){e.statusLoading="loading"})).addCase(U.fulfilled,(function(e,t){if(t.payload&&t.payload.success){var n,a=t.payload,r=a.users,s=a.links.next_url,o=a.total_pages,i=a.page;(n=e.payload).push.apply(n,Object(f.a)(r)),e.statusLoading="idle",e.link_to_next_page=s,e.total_pages=o,e.current_page=i}else e.error="getUsersAsync.fulfilled/ response.success = false"})).addCase(U.rejected,(function(e){e.statusLoading="failed"})).addCase(H.pending,(function(e){e.statusLoading="loading"})).addCase(H.fulfilled,(function(e,t){e.statusLoading="idle",console.log("postUserAsync.fulfilled/ action.payload",t.payload),t.payload})).addCase(H.rejected,(function(e){e.statusLoading="failed"}))}}),A=q.reducer,W=q.actions,B=(W.addUsers,W.addPayload,W.setStatus,W.resetState,{screen:null}),D=Object(u.c)({name:"options",initialState:B,reducers:{setScreen:function(e,t){e.screen=t.payload},resetOptionsState:function(){return B}}}),V=D.reducer,z=D.actions,F=z.setScreen,J=(z.resetOptionsState,function(e){return e.options.screen}),G=Object(c.b)({users:A,token:E,positions:_,options:V}),K={key:"root",storage:p.a,whitelist:["token"]},M=Object(l.g)(K,G),Q=Object(u.a)({reducer:M,middleware:function(e){return e({serializableCheck:{ignoredActions:[l.a,l.f,l.b,l.c,l.d,l.e,"posts"]}})}}),X=Q,Y=Object(l.h)(Q),Z=n(0),$=n(43),ee=a.b,te=a.c,ne=n(46),ae=n(58),re=n.n(ae),se=(n(86),n(6)),oe=function(e){var t=e.className,n=e.disabled,a=void 0!==n&&n,r=e.children,s=void 0===r?"":r,o=e.onClick,i=void 0===o?function(){return console.log("no onClick function")}:o,c=e.width;return Object(se.jsx)("div",{className:re()("Button",{"Button--disabled":a},t),onClick:i,style:{width:c},onKeyDown:function(){},children:Object(se.jsx)("div",{className:"Button__container",children:s})})},ie=n.p+"static/media/logo.85fd1d96.svg",ce=(n(88),function(){return Object(se.jsx)("div",{className:"Header",children:Object(se.jsxs)("div",{className:"Header__container",children:[Object(se.jsx)("div",{className:"Header__logo",children:Object(se.jsx)("button",{type:"button",onClick:function(){ne.animateScroll.scrollToTop()},children:Object(se.jsx)("img",{src:ie,alt:"Logo"})})}),Object(se.jsxs)("div",{className:"Header__nav",children:[Object(se.jsx)(ne.Link,{activeClass:"active",to:"Get-Component",spy:!0,smooth:!0,duration:500,children:Object(se.jsx)(oe,{className:"Header__button",disabled:!1,children:"Users"})}),Object(se.jsx)(oe,{className:"Header__button",children:"Sign in"})]})]})})}),ue=(n(89),function(){return Object(se.jsx)("section",{className:"HomePage",children:Object(se.jsx)("div",{style:{height:"200vh"}})})}),le=function(){return Object(se.jsx)("div",{children:"This page doesn't exist."})},de=768,pe=1024,fe=1170;function ge(){var e=ee(),t=te(J);return Object(Z.useEffect)((function(){e(F(function(){var e=window.innerWidth;switch(!0){case e>fe:return"fullscreen";case e>pe:return"desktop";case e>de:return"tablet";default:return"mobile"}}())),e(P()),e(k())}),[]),Object(Z.useEffect)((function(){t&&"mobile"!==t&&"tablet"!==t&&e(U({page:1,count:6}))}),[e,t]),Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(ce,{}),Object(se.jsxs)("div",{style:{position:"fixed",top:"70px",left:"20px",zIndex:9999},children:[window.innerWidth,"x",window.innerHeight]}),Object(se.jsx)("main",{children:Object(se.jsx)(i.a,{})})]})}localStorage.clear();var je=Object($.a)([{path:"/",element:Object(se.jsx)(ge,{}),errorElement:Object(se.jsx)(le,{}),id:"App",children:[{path:"/",element:Object(se.jsx)(ue,{}),id:"homepage",errorElement:Object(se.jsx)(se.Fragment,{children:"Error on Homepage"})}]}]);n(90);s.a.createRoot(document.getElementById("root")).render(Object(se.jsx)(a.a,{store:X,children:Object(se.jsx)(o.a,{loading:null,persistor:Y,children:Object(se.jsx)(i.c,{router:je})})}))}},[[91,1,2]]]);
//# sourceMappingURL=main.b6c7a9cd.chunk.js.map